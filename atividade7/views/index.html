<!DOCTYPE html>
<html>

<head>
    <title>Agendamento de Consulta</title>
    <!-- Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <!-- Or for RTL support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.rtl.min.css" />

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>
</head>

<body>
    <div class="container" style="width:600px;">
        <h2 align="center">Agendamento de Consulta</h2>
        <br /><br />
        <form action="/dados" method="post">
            <section id="dados_pessoais">
                <h3>Dados pessoais</h3>
                <div class="form-group">
                    <label>Nome Completo:</label>
                    <input type="text" class="form-control" id="nome" placeholder="Insira seu nome" name="nome">
                </div>
                <div class="form-group">
                    <label>CPF:</label>
                    <input type="text" class="form-control" id="cpf" placeholder="Insira seu CPF" name="cpf">
                </div>
                <div class="form-group">
                    <label>data de nascimento:</label>
                    <input type="date" class="form-control" id="data_nascimento" name="data_nascimento">
                </div>
                <div class="form-group">
                    <label>CEP:</label>
                    <input type="text" class="form-control" id="cep" placeholder="Insira seu CEP" name="cep">
                </div>         
                <div class="form-group">
                    <label>UF</label>
                    <select class="form-select" id="uf" name ="uf">
                        <option value="">Selecione</option>
                        <option value="AC">Acre</option>
                        <option value="AL">Alagoas</option>
                        <option value="AP">Amapá</option>
                        <option value="AM">Amazonas</option>
                        <option value="BA">Bahia</option>
                        <option value="CE">Ceará</option>
                        <option value="DF">Distrito Federal</option>
                        <option value="ES">Espírito Santo</option>
                        <option value="GO">Goiás</option>
                        <option value="MA">Maranhão</option>
                        <option value="MT">Mato Grosso</option>
                        <option value="MS">Mato Grosso do Sul</option>
                        <option value="MG">Minas Gerais</option>
                        <option value="PA">Pará</option>
                        <option value="PB">Paraíba</option>
                        <option value="PR">Paraná</option>
                        <option value="PE">Pernambuco</option>
                        <option value="PI">Piauí</option>
                        <option value="RJ">Rio de Janeiro</option>
                        <option value="RN">Rio Grande do Norte</option>
                        <option value="RS">Rio Grande do Sul</option>
                        <option value="RO">Rondônia</option>
                        <option value="RR">Roraima</option>
                        <option value="SC">Santa Catarina</option>
                        <option value="SP">São Paulo</option>
                        <option value="SE">Sergipe</option>
                        <option value="TO">Tocantins</option>
                    </select>
                </div> 
                <div class="form-group">
                    <label>Endereço:</label>
                    <input type="text" class="form-control" id="endereco" placeholder="Insira seu Endereço" name="endereco">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="text" class="form-control" id="email" placeholder="Insira seu E-mail" name="email">
                </div>
                <div class="form-group">
                    <label>Telefone:</label>
                    <input type="number" class="form-control" id="telefone" placeholder="Insira seu telefone" name="telefone">
                </div>
            </section>
            <br/><br/>
            <section class="consulta">
                <h3>Dados da consulta</h3>
                <div class="form-group">
                    <label>Especialidade Médica</label>
                    <select class="form-select" id="especialidade" name="especialidade">
                        <option value="">Selecione</option>
                        <option value="acupuntura">Acupuntura</option>
                        <option value="anestesiologia">Anestesiologia</option>
                        <option value="angiologia">Angiologia</option>
                        <option value="cardiologia">Cardiologia</option>
                        <option value="dermatologia">Dermatologia</option>
                        <option value="fisioterapia">Fisioterapia</option>
                        <option value="geriatria">Geriatria</option>
                        <option value="infectologia">Infectologia</option>
                        <option value="pediatria">Pediatria</option>
                        <option value="ortopedia">Ortopedia</option>
                        <option value="otorrinolaringologia">Otorrinolaringologia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data e hora</label>
                    <input type="datetime-local" class="form-control" id="data_consulta" name="data_consulta">
                </div>
                <div class="form-group">
                    <label>Possui alguma alergia a remédios?</label>
                    <select class="form-select" id="alergiasGroup" name="alergias" 
                        data-placeholder="Se possuir, digite aqui sua(s) alergia(s)"  multiple>
                        <option value="antibioticos">Antibióticos</option>
                        <option value="antiinflamatorios">Anti-inflamatórios</option>
                        <option value="anestesicos">Anestésicos</option>
                        <option value="ervas">Remédios a base de ervas</option>
                    </select>
                </div>
    
                <div class="form-group"> 
                    <label>Informações adicionais</label>
                    <textarea class="form-control" rows="3" id="info_adicionais" name="info_adicionais"></textarea>
                </div>
            </section>
            <br/>
            <div class="form-group">
                <input type="submit" class="btn btn-info" name="submit" value="Submit" />
            </div>
        </form>
    </div>
</body>
</html>

<script>
    var cpf = document.querySelector("#cpf");
    var cep = document.querySelector("#cep");

    $('#alergiasGroup' ).select2({
        theme: "bootstrap-5",
        width: $( this ).data( 'width' ) ? $( this ).data( 'width' ) : $( this ).hasClass( 'w-100' ) ? '100%' : 'style',
        placeholder: $( this ).data( 'placeholder' ),
        closeOnSelect: false,
        tags: true
    } );

    cpf.addEventListener("blur", function(){
        if(cpf.value) {
            cpf.value = cpf.value.match(/\d/g).join("");
            if(cpf.value.length >= 11){
                cpf.value = cpf.value.substring(0, 11);
                cpf.value = cpf.value.match(/.{1,3}/g).join(".").replace(/\.(?=[^.]*$)/,"-");
            }
        } 
    });
    cep.addEventListener("blur", function(){
        if(cep.value) {
            cep.value = cep.value.match(/\d/g).join("");
            if(cep.value.length >= 8){
                cep.value = cep.value.substring(0, 8);
                cep.value = cep.value.match(/.{1,5}/g).join("-");
            }
        } 
    });
</script>